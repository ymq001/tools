<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>utils demo</title>
  <!-- <script src="../../dist/vendor.js" defer></script> -->
  <!-- <script src="../../dist/lib/utils.js" defer></script> -->
  <script type="text/javascript" src="http://api.map.baidu.com/api?v=1.2"></script>
  <!-- <script src="../../src/utils.map/index.js" defer></script> -->
  <script src="../../dist/lib/utils.map.js" defer></script>
</head>

<body>
  <div style="width:700px;height:400px;border:1px solid gray;margin:10px 0 0 10px;" id="container"></div>
  <script type="text/javascript">
    window.onload = function () {
      map = new BMap.Map("container");
      map.centerAndZoom(new BMap.Point(116.401952, 40.032704), 12);
      map.enableScrollWheelZoom();


      window.myRMarker1 = new utils.map.RMarker(new BMap.Point(116.30816, 40.056863), {
          url: 'images/yunweiban.png',
          size: new BMap.Size(50, 40)
        }, {
          "anchor": new BMap.Size(-47, -116),
          "enableDragging": true,
          text: '耶路撒冷的冷',
          count: 10,
          isShowCount: true,
          attrs: {
            rcuId: 123
          }
        });
      map.addOverlay(myRMarker1);

      myRMarker1.addEventListener('click', function(e){
        console.log(e)
      })
      myRMarker1.addEventListener('dragend', function(e){
        console.log('dragend', e)
      })


      var html2 = '<div style="position: absolute; margin: 0pt; padding: 0pt; width: 80px; height: 50px; left: -10px; top: -35px; overflow: hidden;">'
        + '<img id="rm3_image" style="border:none;left:0px; top:0px; position:absolute;" src="images/back.png">'
        + '</div>'
        + '<label class=" BMapLabel" unselectable="on" style="position: absolute; -moz-user-select: none; display: inline; cursor: inherit; border: 0px none; padding: 2px 1px 1px; white-space: nowrap; font: 12px arial,simsun; font-width: bold; z-index: 80; color: rgb(255, 102, 0); left: 15px; top: -35px;">$ 20 B</label>',
        myRMarker2 = new utils.map.RMarker(new BMap.Point(116.402922, 39.99908), html2, {
          "anchor": new BMap.Size(-18, -27),
          "enableDragging": true
        });
      map.addOverlay(myRMarker2);
      myRMarker2.addEventListener("onmouseover", function (e) {
        document.getElementById("rm3_image").src = "images/yunweiban.png";
      });
      myRMarker2.addEventListener("onmouseout", function (e) {
        document.getElementById("rm3_image").src = "images/back.png";
      });
    }
  </script>
</body>

</html>