<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>utils/cookies.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="utils.html">utils</a><ul class='methods'><li data-type='method'><a href="utils.html#isObject">isObject</a></li><li data-type='method'><a href="utils.html#isArray">isArray</a></li><li data-type='method'><a href="utils.html#isDate">isDate</a></li><li data-type='method'><a href="utils.html#isNumber">isNumber</a></li><li data-type='method'><a href="utils.html#isInteger">isInteger</a></li><li data-type='method'><a href="utils.html#isString">isString</a></li><li data-type='method'><a href="utils.html#isBoolean">isBoolean</a></li><li data-type='method'><a href="utils.html#isFunction">isFunction</a></li><li data-type='method'><a href="utils.html#isNull">isNull</a></li><li data-type='method'><a href="utils.html#isNil">isNil</a></li><li data-type='method'><a href="utils.html#isPlainObject">isPlainObject</a></li><li data-type='method'><a href="utils.html#hasOwn">hasOwn</a></li><li data-type='method'><a href="utils.html#unique">unique</a></li><li data-type='method'><a href="utils.html#extend">extend</a></li><li data-type='method'><a href="utils.html#freeze">freeze</a></li><li data-type='method'><a href="utils.html#copy">copy</a></li><li data-type='method'><a href="utils.html#getKeyValue">getKeyValue</a></li><li data-type='method'><a href="utils.html#setKeyValue">setKeyValue</a></li><li data-type='method'><a href="utils.html#toArray">toArray</a></li><li data-type='method'><a href="utils.html#toObject">toObject</a></li><li data-type='method'><a href="utils.html#uuid">uuid</a></li><li data-type='method'><a href="utils.html#getBrowser">getBrowser</a></li><li data-type='method'><a href="utils.html#getUriParams">getUriParams</a></li><li data-type='method'><a href="utils.html#getUriParamValue">getUriParamValue</a></li><li data-type='method'><a href="utils.html#saveLocal">saveLocal</a></li><li data-type='method'><a href="utils.html#getLocal">getLocal</a></li><li data-type='method'><a href="utils.html#getLocal2Json">getLocal2Json</a></li><li data-type='method'><a href="utils.html#removeLocal">removeLocal</a></li><li data-type='method'><a href="utils.html#saveCookie">saveCookie</a></li><li data-type='method'><a href="utils.html#getCookie">getCookie</a></li><li data-type='method'><a href="utils.html#removeCookie">removeCookie</a></li><li data-type='method'><a href="utils.html#clearCookie">clearCookie</a></li></ul></li><li><a href="utils.date.html">date</a><ul class='methods'><li data-type='method'><a href="utils.date.html#.format">format</a></li><li data-type='method'><a href="utils.date.html#.modDays">modDays</a></li><li data-type='method'><a href="utils.date.html#.modMinutes">modMinutes</a></li><li data-type='method'><a href="utils.date.html#.convertDateToTimeStamp">convertDateToTimeStamp</a></li><li data-type='method'><a href="utils.date.html#.convertTimeStampToDate">convertTimeStampToDate</a></li></ul></li><li><a href="utils.QT.html">QT</a><ul class='methods'><li data-type='method'><a href="utils.QT.html#.showLoading">showLoading</a></li></ul></li><li><a href="socket.html">socket</a></li><li><a href="utils.map.default.html">default</a><ul class='members'><li data-type='member'><a href="utils.map.default.html#._map">_map</a></li><li data-type='member'><a href="utils.map.default.html#.'Org'">'Org'</a></li><li data-type='member'><a href="utils.map.default.html#.'Rcu'">'Rcu'</a></li><li data-type='member'><a href="utils.map.default.html#.'Network'">'Network'</a></li><li data-type='member'><a href="utils.map.default.html#.'RingNet'">'RingNet'</a></li><li data-type='member'><a href="utils.map.default.html#.'Robot'">'Robot'</a></li><li data-type='member'><a href="utils.map.default.html#.'Smd'">'Smd'</a></li><li data-type='member'><a href="utils.map.default.html#.'70220002'">'70220002'</a></li><li data-type='member'><a href="utils.map.default.html#.'70220003'">'70220003'</a></li><li data-type='member'><a href="utils.map.default.html#.'70220004'">'70220004'</a></li></ul><ul class='methods'><li data-type='method'><a href="utils.map.default.html#.getIcon">getIcon</a></li><li data-type='method'><a href="utils.map.default.html#.setIcon">setIcon</a></li></ul></li><li><a href="utils.map.html">map</a><ul class='methods'><li data-type='method'><a href="utils.map.html#.initialize">initialize</a></li></ul></li><li><a href="utils.map.RData.html">RData</a><ul class='methods'><li data-type='method'><a href="utils.map.RData.html#initialize">initialize</a></li><li data-type='method'><a href="utils.map.RData.html#refreshDefaults">refreshDefaults</a></li><li data-type='method'><a href="utils.map.RData.html#_convertAttrs">_convertAttrs</a></li><li data-type='method'><a href="utils.map.RData.html#dataTreeToTable">dataTreeToTable</a></li><li data-type='method'><a href="utils.map.RData.html#dataListToTable">dataListToTable</a></li><li data-type='method'><a href="utils.map.RData.html#getDataBykey">getDataBykey</a></li><li data-type='method'><a href="utils.map.RData.html#getOnlyDataBykey">getOnlyDataBykey</a></li><li data-type='method'><a href="utils.map.RData.html#getDatas">getDatas</a></li></ul></li><li><a href="utils.map.RManager.html">RManager</a><ul class='methods'><li data-type='method'><a href="utils.map.RManager.html#addOverlay">addOverlay</a></li><li data-type='method'><a href="utils.map.RManager.html#addOverlays">addOverlays</a></li><li data-type='method'><a href="utils.map.RManager.html#removerOverlay">removerOverlay</a></li><li data-type='method'><a href="utils.map.RManager.html#removeOverlays">removeOverlays</a></li><li data-type='method'><a href="utils.map.RManager.html#removeViewingOverlay">removeViewingOverlay</a></li><li data-type='method'><a href="utils.map.RManager.html#removeViewingOverlays">removeViewingOverlays</a></li><li data-type='method'><a href="utils.map.RManager.html#clearOverlays">clearOverlays</a></li><li data-type='method'><a href="utils.map.RManager.html#clearViewingOverlays">clearViewingOverlays</a></li><li data-type='method'><a href="utils.map.RManager.html#getViewingOverlaysByZoom">getViewingOverlaysByZoom</a></li><li data-type='method'><a href="utils.map.RManager.html#show">show</a></li><li data-type='method'><a href="utils.map.RManager.html#hide">hide</a></li><li data-type='method'><a href="utils.map.RManager.html#toggle">toggle</a></li><li data-type='method'><a href="utils.map.RManager.html#getOverlayBykey">getOverlayBykey</a></li><li data-type='method'><a href="utils.map.RManager.html#getOverlays">getOverlays</a></li></ul></li><li><a href="utils.map.RMarker.html">RMarker</a><ul class='methods'><li data-type='method'><a href="utils.map.RMarker.html#_preRenderContent">_preRenderContent</a></li><li data-type='method'><a href="utils.map.RMarker.html#_convertThemeToString">_convertThemeToString</a></li><li data-type='method'><a href="utils.map.RMarker.html#_renderPresetStyles">_renderPresetStyles</a></li><li data-type='method'><a href="utils.map.RMarker.html#enableDragging">enableDragging</a></li><li data-type='method'><a href="utils.map.RMarker.html#disableDragging">disableDragging</a></li><li data-type='method'><a href="utils.map.RMarker.html#isDraggable">isDraggable</a></li><li data-type='method'><a href="utils.map.RMarker.html#getPosition">getPosition</a></li><li data-type='method'><a href="utils.map.RMarker.html#setPosition">setPosition</a></li><li data-type='method'><a href="utils.map.RMarker.html#getAnchor">getAnchor</a></li><li data-type='method'><a href="utils.map.RMarker.html#setAnchor">setAnchor</a></li><li data-type='method'><a href="utils.map.RMarker.html#getContent">getContent</a></li><li data-type='method'><a href="utils.map.RMarker.html#setContent">setContent</a></li><li data-type='method'><a href="utils.map.RMarker.html#getWidth">getWidth</a></li><li data-type='method'><a href="utils.map.RMarker.html#setWidth">setWidth</a></li><li data-type='method'><a href="utils.map.RMarker.html#getHeight">getHeight</a></li><li data-type='method'><a href="utils.map.RMarker.html#setHeight">setHeight</a></li><li data-type='method'><a href="utils.map.RMarker.html#on">on</a></li><li data-type='method'><a href="utils.map.RMarker.html#off">off</a></li></ul></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-MapDesc.html">MapDesc</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">utils/cookies.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>export let cookies = {
  /**
   * 保存指定键值为localStorage
   * @param {String} name 需要存储的键
   * @param {any} value 需要存储的对应键的值
   * @returns {Boolean}
   */
  saveLocal(name, value) {
    if (window.localStorage &amp;&amp; JSON &amp;&amp; name) {
      if (typeof value == 'object') {
        value = JSON.stringify(value);
      }
      window.localStorage[name] = value;
      return true;
    }
    return false;
  },
  /**
   * 获取localStorage中存储的指定键的值
   * @param {String} name 需要取数据的对象的localStorage的键
   * @param {String} type 可选 返回类型 可设置值 'json'
   * @returns {Null|String|Object}
   */
  getLocal: function (name, type) {
    if (window.localStorage &amp;&amp; JSON &amp;&amp; name) {
      const data = window.localStorage[name];
      if (type &amp;&amp; type == 'json' &amp;&amp; !this.isNull(data)) {
        try {
          return JSON.parse(data);
        } catch (e) {
          console.error(`取数据转换json错误：${e}`);
          return '';
        }
      } else {
        return data;
      }
    }
    return null;
  },
  /**
   * 获取localStorage中存储的指定键的值并转换为json对象
   * @param {String} name 需要取数据的对象的localStorage的键
   * @returns {Null|String|Object}
   */
  getLocal2Json: function (name) {
    return this.getLocal(name, 'json');
  },
  /**
   * 删除localStorage中指定键值
   * @param {String} name 需要删除localStorage中指定键值的键
   * @returns {Null}
   */
  removeLocal(name) {
    if (window.localStorage &amp;&amp; JSON &amp;&amp; name) {
      window.localStorage[name] = null;
    }
    return null;
  },
  /**
   * 保存指定键值为cookie[并设置domain、path、expires]
   * @param {String} name 需要设定的cookie的键
   * @param {any} value 需要设定的cookie的值
   * @param {String} domain 可选 需要设定的domain
   * @param {String} path 可选 需要设定的url路径
   * @param {Number} minSec 可选 需要设定的过期事件 单位：s
   * @returns {Boolean}
   */
  saveCookie(name, value, domain, path, minSec) {
    const cookieEnabled = (navigator.cookieEnabled) ? true : false;
    if (name &amp;&amp; cookieEnabled) {
      path = path || '/';
      if (typeof value == 'object') {
        value = JSON.stringify(value);
      }
      let exp;
      if (minSec) {
        exp = new Date();
        exp.setTime(exp.getTime() + minSec * 1000);
      } else {
        exp = new Date('9998-01-01'); //永不过期
      }
      let expires = minSec ? (`;expires=${exp.toGMTString()}`) : '';
      let cookieString = `${name}=${escape(value)}${expires};path=${path};`;
      if (domain) {
        cookieString += `domain=${domain}`;
      }
      document.cookie = cookieString;
      return true;
    }
    return false;
  },
  /**
   * 获取指定键的cookie值
   * @param {String} name 键名
   * @returns {Null|String}
   */
  getCookie(name) {
    const cookieEnabled = (navigator.cookieEnabled) ? true : false;
    if (name &amp;&amp; cookieEnabled) {
      const arr = document.cookie.match(new RegExp(`(^| )${name}=([^;]*(;|$)`));
      if (arr !== null) {
        return unescape(arr[2]);
      }
    }
    return null;
  },
  /**
   * 删除指定键的cookie
   * @param {String} name 需要删除的cookie对应的键
   * @param {String} domain 可选 需要删除的cookie对应的domain
   * @param {String} path 可选 需要删除的cookie对应的url地址
   * @returns {Boolean}
   */
  removeCookie: function (name, domain, path) {
    const cookieEnabled = (navigator.cookieEnabled) ? true : false;
    if (name &amp;&amp; cookieEnabled) {
      path = path || '/';
      let cookieString = `${name}=0;expires=${new Date(0).toUTCString()};path=${path};`;
      if (domain) {
        cookieString += `domain=${domain};`;
      }
      document.cookie = cookieString;
      return true;
    }
    return false;
  },
  /**
   * 清除cookie
   * @param {String} domain 可选 需要清除的cookie对应的domain
   * @param {String} path 可选 需要清除的cookie对应的url地址
   */
  clearCookie(domain, path) {
    const keys = document.cookie.match(/[^ =;]+(?=\=)/g);
    path = path || '/';
    if (keys) {
      for (let i = keys.length; i--;) {
        let cookieString = `${keys[i]}=0;expires=${new Date(0).toUTCString()};path=${path};`;
        if (domain) {
          cookieString += `domain=${domain};`;
        }
        document.cookie = cookieString;
      }
    }
  }
}</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Nov 14 2018 17:31:02 GMT+0800 (中国标准时间) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/jquery-3.1.1.min.js"></script>

<script src="scripts/search.js"></script>




</body>
</html>
